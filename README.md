# แผนที่ข้อมูลน้ำบาดาล

ระบบแสดงข้อมูลจุดน้ำบาดาลบนแผนที่ ใช้ข้อมูลจาก Google Sheets

> เราเลือกใช้ **Google Sheets** เนื่องจากสะดวกและง่ายกว่าการตั้งค่าฐานข้อมูล PostgreSQL ใน Neon.tech

## ความสามารถหลัก

1. **แสดงแผนที่น้ำบาดาล** - ใช้ Leaflet.js แสดงจุดน้ำบาดาลบนแผนที่พร้อม popup รายละเอียด
2. **รองรับข้อมูล 2 รูปแบบ** - สามารถแสดงได้ทั้งข้อมูลบ่อบาดาลมาตรฐานและข้อมูลแบบ location-based
3. **กรองข้อมูล** - กรองตามประเภท สถานะ และค้นหาด้วยข้อความ
4. **จัดการข้อมูล** - มีหน้า admin สำหรับช่วยสร้างข้อมูลจุดน้ำบาดาล
5. **ตรวจสอบรหัสซ้ำ** - ช่วยป้องกันรหัสบ่อซ้ำในระบบ
6. **Responsive Design** - รองรับการใช้งานบนอุปกรณ์ทุกขนาดหน้าจอ

## ไฟล์ในโปรเจกต์

1. **index.html** - หน้าแสดงแผนที่สำหรับผู้ใช้ทั่วไป
2. **admin.html** - หน้าสำหรับผู้ดูแลระบบ ใช้เพิ่มข้อมูลจุดน้ำบาดาล

## วิธีการใช้งาน

### ตั้งค่า Google Sheets

1. สร้าง Google Sheet ใหม่
2. ตั้งค่าคอลัมน์ตามรูปแบบใดรูปแบบหนึ่ง:

   **รูปแบบที่ 1: ข้อมูลบ่อบาดาล (มีพิกัดจริง):**
   - A: Latitude (ละติจูด)
   - B: Longitude (ลองจิจูด)
   - C: BoreholeID (รหัสบ่อ เช่น SRN-1027)
   - D: TotalDepth (ความลึกทั้งหมด เมตร)
   - E: WaterLevel (ระดับน้ำบาดาล เมตร)
   - F-J: ข้อมูลชั้นดินที่ 1 (ชื่อ, ช่วงความลึก, คำอธิบาย, สี, pH)
   - K-O: ข้อมูลชั้นดินที่ 2
   - P-T: ข้อมูลชั้นดินที่ 3
   - U-Y: ข้อมูลชั้นดินที่ 4
   
   **รูปแบบที่ 2: ข้อมูลทั่วไป (สร้างพิกัดอัตโนมัติ):**
   - A: ชื่อสถานที่
   - B: ประเภท
   - C: รายละเอียด
   - D: ผู้เข้าร่วม/ผู้ก่อสร้าง
   - E: สถานะ
   - F: ไฟล์
   - G: วันที่
   - H: โน้ต

3. ไปที่ File > Share > Publish to web
4. เลือก "Comma-separated values (.csv)" จากเมนูแบบเลื่อนลง
5. คลิก "Publish" และคัดลอก URL

### แก้ไขไฟล์ index.html

1. เปิดไฟล์ index.html
2. ค้นหาบรรทัด: `const googleSheetCsvUrl = 'YOUR_GOOGLE_SHEET_CSV_URL_HERE';`
3. แทนที่ `'YOUR_GOOGLE_SHEET_CSV_URL_HERE'` ด้วย URL ที่ได้จาก Google Sheets

### การอัปโหลดไฟล์

1. อัปโหลดไฟล์ `index.html` และ `admin.html` ไปยังเว็บโฮสติ้งที่ต้องการ
2. ผู้ใช้ทั่วไปสามารถเข้าถึง `index.html` เพื่อดูแผนที่
3. ผู้ดูแลระบบสามารถเข้าถึง `admin.html` เพื่อเพิ่มข้อมูลจุด

### หมายเหตุเกี่ยวกับหน้า admin.html

หน้า admin ในโปรเจกต์นี้เป็นเพียงตัวอย่างเท่านั้น ในการใช้งานจริง คุณจะต้อง:

1. สร้าง Google Cloud Project
2. เปิดใช้งาน Google Sheets API
3. สร้าง OAuth 2.0 credentials
4. ใส่ Client ID ของคุณในส่วน `YOUR_GOOGLE_CLIENT_ID`
5. เขียนโค้ด API เพื่อส่งข้อมูลไปยัง Google Sheets

## ตัวอย่างข้อมูล

### รูปแบบที่ 1: ข้อมูลบ่อบาดาล
```
13.7563,100.5018,SRN-1027,52,39,ดินเหนียว,0-8 ม.,ดินเหนียวสีน้ำตาลแดง,#D2B48C,6.5,ดินเหนียวปนทราย,8-20 ม.,ดินเหนียวปนทราย,#DAA520,7.0,ชั้นดินดาน,20-40 ม.,หินดินดานสีเทา,#A9A9A9,7.2,ชั้นหินปูน,40-52 ม.,หินปูนแตกหัก (ชั้นให้น้ำ),#D3D3D3,7.5
```

### รูปแบบที่ 2: ข้อมูลทั่วไป
```
บ่อน้ำบาดาลวัดสวนสรรเพชญ,บ่อบาดาล,ตั้งอยู่บริเวณทิศตะวันตกของวัด ใกล้อาคารอเนกประสงค์,กรมทรัพยากรน้ำบาดาล,เผยแพร่แล้ว,,2023-10-15,ปริมาณน้ำพอเพียงตลอดปี
แหล่งน้ำบาดาลชุมชนตลาดน้อย,น้ำผิวดิน,เป็นแหล่งน้ำสาธารณะที่ประชาชนใช้ร่วมกัน,เทศบาลเมือง,กำลังดำเนินการ,,2023-11-01,อยู่ระหว่างการปรับปรุงคุณภาพน้ำ
```

## ฟีเจอร์เพิ่มเติม

1. **การกรองข้อมูล:**
   - สามารถกรองตามประเภท สถานะ และค้นหาด้วยข้อความได้
   - กดปุ่ม "กรอง" เพื่อใช้งาน หรือ "รีเซ็ต" เพื่อแสดงทั้งหมด

2. **Marker Clustering:**
   - จุดข้อมูลที่อยู่ใกล้กันจะถูกจัดกลุ่มเพื่อให้มองเห็นได้ง่ายขึ้น
   - คลิกที่กลุ่มเพื่อซูมเข้าและดูจุดย่อย

3. **สีของจุดข้อมูล:**
   - สีของจุดจะแตกต่างกันตามสถานะของข้อมูล
   - เขียว = ใหม่, ส้ม = กำลังดำเนินการ, ม่วง = รอการตรวจสอบ
   - ชมพู = เผยแพร่แล้ว, แดง = ถูกระงับ, น้ำเงิน = ค่าเริ่มต้น